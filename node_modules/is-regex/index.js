'use strict';

<<<<<<< HEAD
var hasSymbols = require('has-symbols')();
var hasToStringTag = hasSymbols && typeof Symbol.toStringTag === 'symbol';
var hasOwnProperty;
var regexExec;
=======
var callBound = require('call-bind/callBound');
var hasSymbols = require('has-symbols')();
var hasToStringTag = hasSymbols && typeof Symbol.toStringTag === 'symbol';
var has;
var $exec;
>>>>>>> 64e5a878e639053ebd41b0338fb1e758bb115dad
var isRegexMarker;
var badStringifier;

if (hasToStringTag) {
<<<<<<< HEAD
	hasOwnProperty = Function.call.bind(Object.prototype.hasOwnProperty);
	regexExec = Function.call.bind(RegExp.prototype.exec);
=======
	has = callBound('Object.prototype.hasOwnProperty');
	$exec = callBound('RegExp.prototype.exec');
>>>>>>> 64e5a878e639053ebd41b0338fb1e758bb115dad
	isRegexMarker = {};

	var throwRegexMarker = function () {
		throw isRegexMarker;
	};
	badStringifier = {
		toString: throwRegexMarker,
		valueOf: throwRegexMarker
	};

	if (typeof Symbol.toPrimitive === 'symbol') {
		badStringifier[Symbol.toPrimitive] = throwRegexMarker;
	}
}

<<<<<<< HEAD
var toStr = Object.prototype.toString;
=======
var $toString = callBound('Object.prototype.toString');
>>>>>>> 64e5a878e639053ebd41b0338fb1e758bb115dad
var gOPD = Object.getOwnPropertyDescriptor;
var regexClass = '[object RegExp]';

module.exports = hasToStringTag
	// eslint-disable-next-line consistent-return
	? function isRegex(value) {
		if (!value || typeof value !== 'object') {
			return false;
		}

		var descriptor = gOPD(value, 'lastIndex');
<<<<<<< HEAD
		var hasLastIndexDataProperty = descriptor && hasOwnProperty(descriptor, 'value');
=======
		var hasLastIndexDataProperty = descriptor && has(descriptor, 'value');
>>>>>>> 64e5a878e639053ebd41b0338fb1e758bb115dad
		if (!hasLastIndexDataProperty) {
			return false;
		}

		try {
<<<<<<< HEAD
			regexExec(value, badStringifier);
=======
			$exec(value, badStringifier);
>>>>>>> 64e5a878e639053ebd41b0338fb1e758bb115dad
		} catch (e) {
			return e === isRegexMarker;
		}
	}
	: function isRegex(value) {
		// In older browsers, typeof regex incorrectly returns 'function'
		if (!value || (typeof value !== 'object' && typeof value !== 'function')) {
			return false;
		}

<<<<<<< HEAD
		return toStr.call(value) === regexClass;
=======
		return $toString(value) === regexClass;
>>>>>>> 64e5a878e639053ebd41b0338fb1e758bb115dad
	};
