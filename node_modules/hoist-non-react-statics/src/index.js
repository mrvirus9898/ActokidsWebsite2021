/**
 * Copyright 2015, Yahoo! Inc.
 * Copyrights licensed under the New BSD License. See the accompanying LICENSE file for terms.
 */
<<<<<<< HEAD
var REACT_STATICS = {
    childContextTypes: true,
=======
import { ForwardRef, Memo, isMemo } from 'react-is';

const REACT_STATICS = {
    childContextTypes: true,
    contextType: true,
>>>>>>> 64e5a878e639053ebd41b0338fb1e758bb115dad
    contextTypes: true,
    defaultProps: true,
    displayName: true,
    getDefaultProps: true,
<<<<<<< HEAD
=======
    getDerivedStateFromError: true,
>>>>>>> 64e5a878e639053ebd41b0338fb1e758bb115dad
    getDerivedStateFromProps: true,
    mixins: true,
    propTypes: true,
    type: true
};

<<<<<<< HEAD
var KNOWN_STATICS = {
=======
const KNOWN_STATICS = {
>>>>>>> 64e5a878e639053ebd41b0338fb1e758bb115dad
    name: true,
    length: true,
    prototype: true,
    caller: true,
    callee: true,
    arguments: true,
    arity: true
};

<<<<<<< HEAD
var defineProperty = Object.defineProperty;
var getOwnPropertyNames = Object.getOwnPropertyNames;
var getOwnPropertySymbols = Object.getOwnPropertySymbols;
var getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;
var getPrototypeOf = Object.getPrototypeOf;
var objectPrototype = getPrototypeOf && getPrototypeOf(Object);
=======
const FORWARD_REF_STATICS = {
    '$$typeof': true,
    render: true,
    defaultProps: true,
    displayName: true,
    propTypes: true
};

const MEMO_STATICS = {
    '$$typeof': true,
    compare: true,
    defaultProps: true,
    displayName: true,
    propTypes: true,
    type: true,
}

const TYPE_STATICS = {};
TYPE_STATICS[ForwardRef] = FORWARD_REF_STATICS;
TYPE_STATICS[Memo] = MEMO_STATICS;

function getStatics(component) {
    // React v16.11 and below
    if (isMemo(component)) {
        return MEMO_STATICS;
    }

    // React v16.12 and above
    return TYPE_STATICS[component['$$typeof']] || REACT_STATICS;
}

const defineProperty = Object.defineProperty;
const getOwnPropertyNames = Object.getOwnPropertyNames;
const getOwnPropertySymbols = Object.getOwnPropertySymbols;
const getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;
const getPrototypeOf = Object.getPrototypeOf;
const objectPrototype = Object.prototype;
>>>>>>> 64e5a878e639053ebd41b0338fb1e758bb115dad

export default function hoistNonReactStatics(targetComponent, sourceComponent, blacklist) {
    if (typeof sourceComponent !== 'string') { // don't hoist over string (html) components

        if (objectPrototype) {
<<<<<<< HEAD
            var inheritedComponent = getPrototypeOf(sourceComponent);
=======
            const inheritedComponent = getPrototypeOf(sourceComponent);
>>>>>>> 64e5a878e639053ebd41b0338fb1e758bb115dad
            if (inheritedComponent && inheritedComponent !== objectPrototype) {
                hoistNonReactStatics(targetComponent, inheritedComponent, blacklist);
            }
        }

<<<<<<< HEAD
        var keys = getOwnPropertyNames(sourceComponent);
=======
        let keys = getOwnPropertyNames(sourceComponent);
>>>>>>> 64e5a878e639053ebd41b0338fb1e758bb115dad

        if (getOwnPropertySymbols) {
            keys = keys.concat(getOwnPropertySymbols(sourceComponent));
        }

<<<<<<< HEAD
        for (var i = 0; i < keys.length; ++i) {
            var key = keys[i];
            if (!REACT_STATICS[key] && !KNOWN_STATICS[key] && (!blacklist || !blacklist[key])) {
                var descriptor = getOwnPropertyDescriptor(sourceComponent, key);
=======
        const targetStatics = getStatics(targetComponent);
        const sourceStatics = getStatics(sourceComponent);

        for (let i = 0; i < keys.length; ++i) {
            const key = keys[i];
            if (!KNOWN_STATICS[key] &&
                !(blacklist && blacklist[key]) &&
                !(sourceStatics && sourceStatics[key]) &&
                !(targetStatics && targetStatics[key])
            ) {
                const descriptor = getOwnPropertyDescriptor(sourceComponent, key);
>>>>>>> 64e5a878e639053ebd41b0338fb1e758bb115dad
                try { // Avoid failures from read-only properties
                    defineProperty(targetComponent, key, descriptor);
                } catch (e) {}
            }
        }
<<<<<<< HEAD

        return targetComponent;
=======
>>>>>>> 64e5a878e639053ebd41b0338fb1e758bb115dad
    }

    return targetComponent;
};
